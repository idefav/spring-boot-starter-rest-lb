language: java
jdk:
  - openjdk8
notification:
  email:
    recipients:
      - wzs2009_hi@126.com
    on_success: always
    on_failure: always

before_install:
  - pip install --user codecov

after_success:
  - mvn clean test jacoco:report coveralls:report
  - codecov

branches:
  only:
    - master

env:
  global:
    - secure: "txoYuciBo6e1YouMPYrgHOttqF3qGeBMTLQhyyFrSjABANcT+ce4M3v7n4gVzNfwEpGFWXNyNIrgVpTifS3psF/K2tnAvQ0iba6+NYP86fG6jv4a2mnZ2Rr8q3uHufydRnt3XLyK/SllbuHaffoiCIxbmnOWX0cbNZ8rUs+4EVQmt3zXKbiDtRIy07aVKKx0YU5/20GgfQ/yZJNaDEWN7alEcdCjXTRJKMe6pfb6bmRtrYfzVfMUKj0kNPqPTY94XVHVvw0E+Yk+7kY9SDnuzvBIDNxELm2ez9umqdxin+UX3a9pA0nrNvjJHnVsQ98xsEmrJojS9/65H63WnhXGafyuWwtJAnbabeDIPVuQmQVI5kibJu91IxyTy6VC1q/N9mWUA7P57cnQgXIyXA2kGrbu0MYzHKfI6Pj0oj8PwOUPRWMS4tmT3FW8ep08cDYZXHo+6lbHtomfqpW5eyXF4DAB1gHsEncEFzUBE2TAGygfdXC0tf8r0mxo2ikjjxBwhBbeGWxmtKCuMU67V8mKwxa2JZ9JTbOrDBwlJdkGU4gaazbA2VZN9lITlTxc5M96Hpx+KrqGbBtfVWad5jdLV/XX9mMQbYuajpE/mscH30uaWPJlE+RbIXkdTul1aczj8ENf9aaLSsK1rgy6L3125K0WcGHcrTSA8iAPFAj8Img="
    - "MAVEN_OPTS=-Xms1024m -Xmx3072m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=384m"
before_install:
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
  coverity_scan:
    project:
      name: "idefav/spring-boot-starter-rest-lb"
      description: "Build submitted via Travis CI"
    notification_email: wzs2009_hi@126.com
    build_command_prepend: "mvn clean"
    build_command: "mvn -DskipTests=true compile"
    branch_pattern: master

cache:
  directories:
    - $HOME/.m2
